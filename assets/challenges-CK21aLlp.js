import{f as N,r as T}from"./renderChallenges-u1fxSgpV.js";const b=document.querySelector(".challenges__list");let A=[];const q=async()=>{const{success:e,data:t,error:i}=await N();if(!e){console.error("Failed to fetch challenges:",i),b.innerHTML="<li>Error loading challenges. Please try again later.</li>";return}A=t,b.innerHTML="",T(t,b)},C=()=>A;q();const B=document.querySelector(".filter__button");B.addEventListener("click",H);let S;const I=400;let v,m=[],k=[],o={lowestStars:[],lowestRating:0,highestStars:[],highestRating:5};function H(){const e=document.querySelector(".filter");B.classList.add("filter__hidden");const t=document.createElement("box");e.appendChild(t),t.classList.add("filter__box");const i=document.createElement("div");t.appendChild(i),i.classList.add("filter__box__topDiv");const s=document.createElement("h2");s.innerHTML="Filter challenges",i.appendChild(s),s.classList.add("filter__box__topDiv__title");const c=document.createElement("button");i.appendChild(c),c.classList.add("filter__box__topDiv__closeFilterBtn"),c.innerHTML="X",c.addEventListener("click",z);const n=document.createElement("div");t.appendChild(n),n.classList.add("filter__box__centerDiv");const a=document.createElement("div");n.appendChild(a),a.classList.add("filter__box__centerDiv__checkDiv");const u=document.createElement("h4");u.textContent="By type",a.appendChild(u),u.classList.add("filter__box__centerDiv__checkDiv__title");const d=document.createElement("div");a.appendChild(d),d.classList.add("filter__box__centerDiv__checkDiv__divTop");const _=document.createElement("div");a.appendChild(_),_.classList.add("filter__box__centerDiv__checkDiv__divBottom");const l=document.createElement("input");l.type="checkbox",l.id="DOM__checkBox1",l.checked=!0,d.appendChild(l),l.classList.add("filter__box__centerDiv__checkDiv__checkBox"),l.addEventListener("change",()=>p(r.value));const g=document.createElement("label");g.htmlFor="DOM__checkBox1",g.appendChild(document.createTextNode("Include online challenges")),d.appendChild(g);const h=document.createElement("input");h.type="checkbox",h.id="DOM__checkBox2",h.checked=!0,_.appendChild(h),h.classList.add("filter__box__centerDiv__checkDiv__checkBox"),h.addEventListener("change",()=>p(r.value));const x=document.createElement("label");x.htmlFor="DOM__checkBox2",x.appendChild(document.createTextNode("Include on-site challenges")),_.appendChild(x),U();const f=document.createElement("div");n.appendChild(f),f.classList.add("filter__box__centerDiv__dynamicDivMain");const L=document.createElement("div");f.appendChild(L),L.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTitle");const M=document.createElement("div");f.appendChild(M),M.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");const y=document.createElement("h4");y.textContent="By tags",L.appendChild(y),y.classList.add("filter__box__centerDiv__dynamicDivMain__title");const O=C();V(O);const D=document.createElement("div");t.appendChild(D),D.classList.add("filter__box__searchDivMain");const E=document.createElement("h4");E.textContent="Or type to search for keywords",D.appendChild(E),E.classList.add("filter__box__searchDivMain__title");const r=document.createElement("input");r.type="search",r.id="searchField-input",r.placeholder="Start typing to filter",D.appendChild(r),r.classList.add("filter__box__searchDivMain__searchfield"),r.addEventListener("input",j)}document.addEventListener("DOMContentLoaded",()=>{const t=new URLSearchParams(window.location.search).get("type");setTimeout(()=>{t&&J(t)},400)});function P(e){k.forEach(t=>{const i=m.includes(t.textContent.toLowerCase());t.classList.toggle("active-tag",i)})}function U(){const e=document.querySelector(".filter__box__centerDiv"),t=document.createElement("div");t.classList.add("filter__box__centerDiv__ratingDiv"),e.appendChild(t);const i=document.createElement("h4");i.textContent="By rating",t.appendChild(i),i.classList.add("filter__box__centerDiv__ratingDiv__title");const s=document.createElement("div");s.classList.add("filter__box__centerDiv__ratingDiv__starDiv"),t.appendChild(s);for(let n=1;n<=5;n++){const a=new Image;a.src="assets/svg/star.svg",a.className="filter__box__centerDiv__ratingDiv__star",s.appendChild(a),o.lowestStars.push(a),a.id="lowest_"+n,R(a,"lowestRating",n)}const c=document.createElement("p");c.textContent="to",c.classList.add("filter__box__centerDiv__ratingDiv__starDiv__text"),s.appendChild(c);for(let n=1;n<=5;n++){const a=new Image;a.src="assets/svg/star-filled.svg",a.className="filter__box__centerDiv__ratingDiv__star",s.appendChild(a),o.highestStars.push(a),a.id="highest_"+n,R(a,"highestRating",n)}}function R(e,t,i){e.addEventListener("click",()=>{let s=!1;(t.includes("lowest")?"lowestRating":"highestRating")==="lowestRating"?i>o.highestRating&&(s=!0):i<o.lowestRating&&(s=!0),s||(o[t]=i,w(e),p(v?v.value:""))}),e.addEventListener("mouseover",()=>{w(e,i)}),e.addEventListener("mouseout",()=>{w(e)})}function w(e,t){let i=e.id.includes("lowest")?"lowestRating":"highestRating",s=t||o[i];e.id.includes("lowest")?o.lowestStars.forEach((c,n)=>{n+1<=s?(c.getAttribute("src")==="assets/svg/star.svg"||n+1===Number(e.id[e.id.length-1]))&&(c.src="assets/svg/star-filled.svg"):c.getAttribute("src")==="assets/svg/star-filled.svg"&&(c.src="assets/svg/star.svg")}):o.highestStars.forEach((c,n)=>{n>s-1?c.src="assets/svg/star.svg":c.src="assets/svg/star-filled.svg"})}function Q(e){const t=m.indexOf(e);t===-1?m.push(e):m.splice(t,1),P(),p(v?v.value:"")}function V(e){const t=document.querySelector(".filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");t.textContent="";const i=X(e);k=[],i.forEach(s=>{const c=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),n=document.createElement("button");n.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicTag"),n.textContent=c,n.addEventListener("click",()=>Q(s)),m.includes(s)&&n.classList.add("active-tag"),t.appendChild(n),k.push(n)})}function X(e){const t=new Set;return e.forEach(i=>{i.labels.forEach(s=>{t.add(s)})}),Array.from(t).sort((i,s)=>i.localeCompare(s))}function j(e){clearTimeout(S),S=setTimeout(()=>{v=e.target,p(e.target.value)},I)}function p(e){const t=C();console.log("All challenges:",t);const i=document.getElementById("DOM__checkBox1").checked,s=document.getElementById("DOM__checkBox2").checked,c=t.filter(n=>{const a=n.rating>=o.lowestRating&&n.rating<=o.highestRating,u=e.length<3||n.title.toLowerCase().includes(e.toLowerCase())||n.description.toLowerCase().includes(e.toLowerCase())||n.labels.some(l=>l.toLowerCase().includes(e.toLowerCase())),d=i&&n.type.toLowerCase()==="online"||s&&n.type.toLowerCase()==="onsite",_=m.every(l=>n.labels.some(g=>g.toLowerCase()===l.toLowerCase()));return u&&d&&_&&a});F(c)}function F(e){const t=document.querySelector(".challenges__list");if(t.textContent="",e.length===0){t.textContent="No matching challenges";return}T(e,t)}function z(){B.classList.remove("filter__hidden"),G();const e=C();F(e)}function G(){document.querySelector(".filter__box").remove()}function J(e){const i=C().filter(c=>c.type.toLowerCase()===e.toLowerCase()),s=document.querySelector(".challenges__list");T(i,s)}
//# sourceMappingURL=challenges-CK21aLlp.js.map
