import"./menu-DbbXSYly.js";import{f as H,r as M}from"./renderChallenges-DuKLZVbL.js";const w=document.querySelector(".challenges__list");let N=[];const P=async()=>{const{success:t,data:e,error:i}=await H();if(!t){console.error("Failed to fetch challenges:",i),w.innerHTML="<li>Error loading challenges. Please try again later.</li>";return}N=e,w.innerHTML="",M(e,w)},x=()=>N;P();const R=document.querySelector(".filter__button");R.addEventListener("click",Q);let F;const U=400;let d,m=[],k=[],r={lowestStars:[],lowestRating:0,highestStars:[],highestRating:5},T,B="OR";const V=document.querySelector(".sorting-selection");V.addEventListener("change",t=>g(d?d.value:"",t),!1);function Q(){const t=document.querySelector(".filter");R.classList.add("filter__hidden");const e=document.createElement("box");t.appendChild(e),e.classList.add("filter__box");const i=document.createElement("div");e.appendChild(i),i.classList.add("filter__box__topDiv");const n=document.createElement("h2");n.innerHTML="Filter challenges",i.appendChild(n),n.classList.add("filter__box__topDiv__title");const s=document.createElement("button");i.appendChild(s),s.classList.add("filter__box__topDiv__closeFilterBtn"),s.innerHTML="X",s.addEventListener("click",W);const c=document.createElement("div");e.appendChild(c),c.classList.add("filter__box__centerDiv");const a=document.createElement("div");e.appendChild(a),a.classList.add("filter__box__bottomDiv");const o=document.createElement("div");c.appendChild(o),o.classList.add("filter__box__centerDiv__checkDiv");const f=document.createElement("h4");f.textContent="By type",o.appendChild(f),f.classList.add("filter__box__centerDiv__checkDiv__title");const v=document.createElement("div");o.appendChild(v),v.classList.add("filter__box__centerDiv__checkDiv__divTop");const _=document.createElement("div");o.appendChild(_),_.classList.add("filter__box__centerDiv__checkDiv__divBottom");const l=document.createElement("input");l.type="checkbox",l.id="DOM__checkBox1",l.checked=!0,v.appendChild(l),l.classList.add("filter__box__centerDiv__checkDiv__checkBox"),l.addEventListener("change",()=>g(h.value));const u=document.createElement("label");u.htmlFor="DOM__checkBox1",u.appendChild(document.createTextNode("Include online challenges")),v.appendChild(u);const p=document.createElement("input");p.type="checkbox",p.id="DOM__checkBox2",p.checked=!0,_.appendChild(p),p.classList.add("filter__box__centerDiv__checkDiv__checkBox"),p.addEventListener("change",()=>g(h.value));const L=document.createElement("label");L.htmlFor="DOM__checkBox2",L.appendChild(document.createTextNode("Include on-site challenges")),_.appendChild(L),j();const D=document.createElement("div");c.appendChild(D),D.classList.add("filter__box__centerDiv__dynamicDivMain");const b=document.createElement("div");D.appendChild(b),b.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTitle");const A=document.createElement("div");D.appendChild(A),A.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");const y=document.createElement("h4");y.textContent="By tags",b.appendChild(y),y.classList.add("filter__box__centerDiv__dynamicDivMain__title");const I=x();G(I);const C=document.createElement("div");a.appendChild(C),C.classList.add("filter__box__bottomDiv__searchDivMain");const E=document.createElement("h4");E.textContent="Or type to search for keywords",C.appendChild(E),E.classList.add("filter__box__bottomDiv__searchDivMain__title");const h=document.createElement("input");h.type="search",h.id="searchField-input",h.placeholder="Start typing to filter",C.appendChild(h),h.classList.add("filter__box__bottomDiv__searchDivMain__searchfield"),h.addEventListener("input",K),$()}document.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search).get("type");setTimeout(()=>{e&&Z(e)},400)});function X(t){k.forEach(e=>{const i=m.includes(e.textContent.toLowerCase());e.classList.toggle("active-tag",i)})}function j(){const t=document.querySelector(".filter__box__centerDiv"),e=document.createElement("div");e.classList.add("filter__box__centerDiv__ratingDiv"),t.appendChild(e);const i=document.createElement("h4");i.textContent="By rating",e.appendChild(i),i.classList.add("filter__box__centerDiv__ratingDiv__title");const n=document.createElement("div");n.classList.add("filter__box__centerDiv__ratingDiv__starDiv"),e.appendChild(n);for(let c=1;c<=5;c++){const a=new Image;a.src="assets/svg/star.svg",a.className="filter__box__centerDiv__ratingDiv__star",n.appendChild(a),r.lowestStars.push(a),a.id="lowest_"+c,O(a,"lowestRating",c)}const s=document.createElement("p");s.textContent="to",s.classList.add("filter__box__centerDiv__ratingDiv__starDiv__text"),n.appendChild(s);for(let c=1;c<=5;c++){const a=new Image;a.src="assets/svg/star-filled.svg",a.className="filter__box__centerDiv__ratingDiv__star",n.appendChild(a),r.highestStars.push(a),a.id="highest_"+c,O(a,"highestRating",c)}}function O(t,e,i){t.addEventListener("click",()=>{let n=!1;(e.includes("lowest")?"lowestRating":"highestRating")==="lowestRating"?i>r.highestRating&&(n=!0):i<r.lowestRating&&(n=!0),n||(r[e]=i,S(t),g(d?d.value:""))}),t.addEventListener("mouseover",()=>{S(t,i)}),t.addEventListener("mouseout",()=>{S(t)})}function S(t,e){let i=t.id.includes("lowest")?"lowestRating":"highestRating",n=e||r[i];t.id.includes("lowest")?r.lowestStars.forEach((s,c)=>{c+1<=n?(s.getAttribute("src")==="assets/svg/star.svg"||c+1===Number(t.id[t.id.length-1]))&&(s.src="assets/svg/star-filled.svg"):s.getAttribute("src")==="assets/svg/star-filled.svg"&&(s.src="assets/svg/star.svg")}):r.highestStars.forEach((s,c)=>{c>n-1?s.src="assets/svg/star.svg":s.src="assets/svg/star-filled.svg"})}function z(t){const e=m.indexOf(t);e===-1?m.push(t):m.splice(e,1),X(),g(d?d.value:"")}function G(t){const e=document.querySelector(".filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");e.textContent="";const i=J(t);k=[],i.forEach(n=>{const s=n.charAt(0).toUpperCase()+n.slice(1).toLowerCase(),c=document.createElement("button");c.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicTag"),c.textContent=s,c.addEventListener("click",()=>z(n)),m.includes(n)&&c.classList.add("active-tag"),e.appendChild(c),k.push(c)})}function J(t){const e=new Set;return t.forEach(i=>{i.labels.forEach(n=>{e.add(n)})}),Array.from(e).sort((i,n)=>i.localeCompare(n))}function K(t){clearTimeout(F),F=setTimeout(()=>{d=t.target,g(t.target.value)},U)}function g(t,e){const i=x();console.log("All challenges:",i);const n=document.getElementById("DOM__checkBox1")?document.getElementById("DOM__checkBox1").checked:!0,s=document.getElementById("DOM__checkBox2")?document.getElementById("DOM__checkBox2").checked:!0,c=i.filter(a=>{const o=a.rating>=r.lowestRating&&a.rating<=r.highestRating,f=t.length<3||a.title.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.labels.some(l=>l.toLowerCase().includes(t.toLowerCase())),v=n&&a.type.toLowerCase()==="online"||s&&a.type.toLowerCase()==="onsite";let _;return B==="AND"?_=m.every(l=>a.labels.some(u=>u.toLowerCase()===l.toLowerCase())):_=m.length===0||m.some(l=>a.labels.some(u=>u.toLowerCase()===l.toLowerCase())),f&&v&&_&&o});e&&(T=e),T&&c.sort((a,o)=>{switch(T.target.value){case"name":return a.title.localeCompare(o.title);case"name-reverse":return o.title.localeCompare(a.title);case"rating-lowest":return a.rating-o.rating;case"rating-highest":return o.rating-a.rating}}),q(c)}function q(t){const e=document.querySelector(".challenges__list");if(e.textContent="",t.length===0){e.textContent="No matching challenges";return}M(t,e)}function W(){R.classList.remove("filter__hidden"),Y();const t=x();q(t)}function Y(){document.querySelector(".filter__box").remove()}function Z(t){const i=x().filter(s=>s.type.toLowerCase()===t.toLowerCase()),n=document.querySelector(".challenges__list");M(i,n)}function $(){const t=document.querySelector(".filter__box__bottomDiv"),e=document.createElement("div");e.classList.add("filter__box__bottomDiv__tagSwitchDiv"),t.appendChild(e);const i=document.createElement("h4");i.textContent="Match Any Tag",e.appendChild(i),i.classList.add("filter__box__bottomDiv__tagSwitchDiv__title");const n=document.createElement("label");n.classList.add("filter__box__bottomDiv__tagSwitchDiv__label"),e.appendChild(n);const s=document.createElement("input");s.type="checkbox",s.classList.add("filter__box__bottomDiv__tagSwitchDiv__input"),n.appendChild(s),s.addEventListener("change",ee,!1);const c=document.createElement("span");c.classList.add("filter__box__bottomDiv__tagSwitchDiv__switch"),c.classList.add("round"),n.appendChild(c)}function ee(t){let e=t.target.checked,i=document.querySelector(".filter__box__bottomDiv__tagSwitchDiv__title");e?(i.textContent="Combine Tags",B="AND"):(i.textContent="Match All Tags",B="OR"),g(d?d.value:"")}
//# sourceMappingURL=challenges-g1aS2kIB.js.map
