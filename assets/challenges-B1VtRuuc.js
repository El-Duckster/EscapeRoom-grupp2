import"./menu-BIv-Fo41.js";import{f as q,r as T}from"./renderChallenges-BQDNUyFF.js";const b=document.querySelector(".challenges__list");let A=[];const I=async()=>{const{success:e,data:t,error:i}=await q();if(!e){console.error("Failed to fetch challenges:",i),b.innerHTML="<li>Error loading challenges. Please try again later.</li>";return}A=t,b.innerHTML="",T(t,b)},C=()=>A;I();const M=document.querySelector(".filter__button");M.addEventListener("click",U);let R;const H=400;let g,v=[],B=[],o={lowestStars:[],lowestRating:0,highestStars:[],highestRating:5},w;const P=document.querySelector(".sorting-selection");P.addEventListener("change",e=>p(g?g.value:"",e),!1);function U(){const e=document.querySelector(".filter");M.classList.add("filter__hidden");const t=document.createElement("box");e.appendChild(t),t.classList.add("filter__box");const i=document.createElement("div");t.appendChild(i),i.classList.add("filter__box__topDiv");const c=document.createElement("h2");c.innerHTML="Filter challenges",i.appendChild(c),c.classList.add("filter__box__topDiv__title");const a=document.createElement("button");i.appendChild(a),a.classList.add("filter__box__topDiv__closeFilterBtn"),a.innerHTML="X",a.addEventListener("click",J);const s=document.createElement("div");t.appendChild(s),s.classList.add("filter__box__centerDiv");const n=document.createElement("div");s.appendChild(n),n.classList.add("filter__box__centerDiv__checkDiv");const l=document.createElement("h4");l.textContent="By type",n.appendChild(l),l.classList.add("filter__box__centerDiv__checkDiv__title");const u=document.createElement("div");n.appendChild(u),u.classList.add("filter__box__centerDiv__checkDiv__divTop");const m=document.createElement("div");n.appendChild(m),m.classList.add("filter__box__centerDiv__checkDiv__divBottom");const r=document.createElement("input");r.type="checkbox",r.id="DOM__checkBox1",r.checked=!0,u.appendChild(r),r.classList.add("filter__box__centerDiv__checkDiv__checkBox"),r.addEventListener("change",()=>p(_.value));const h=document.createElement("label");h.htmlFor="DOM__checkBox1",h.appendChild(document.createTextNode("Include online challenges")),u.appendChild(h);const d=document.createElement("input");d.type="checkbox",d.id="DOM__checkBox2",d.checked=!0,m.appendChild(d),d.classList.add("filter__box__centerDiv__checkDiv__checkBox"),d.addEventListener("change",()=>p(_.value));const x=document.createElement("label");x.htmlFor="DOM__checkBox2",x.appendChild(document.createTextNode("Include on-site challenges")),m.appendChild(x),Q();const f=document.createElement("div");s.appendChild(f),f.classList.add("filter__box__centerDiv__dynamicDivMain");const L=document.createElement("div");f.appendChild(L),L.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTitle");const S=document.createElement("div");f.appendChild(S),S.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");const y=document.createElement("h4");y.textContent="By tags",L.appendChild(y),y.classList.add("filter__box__centerDiv__dynamicDivMain__title");const N=C();j(N);const D=document.createElement("div");t.appendChild(D),D.classList.add("filter__box__searchDivMain");const E=document.createElement("h4");E.textContent="Or type to search for keywords",D.appendChild(E),E.classList.add("filter__box__searchDivMain__title");const _=document.createElement("input");_.type="search",_.id="searchField-input",_.placeholder="Start typing to filter",D.appendChild(_),_.classList.add("filter__box__searchDivMain__searchfield"),_.addEventListener("input",G)}document.addEventListener("DOMContentLoaded",()=>{const t=new URLSearchParams(window.location.search).get("type");setTimeout(()=>{t&&W(t)},400)});function V(e){B.forEach(t=>{const i=v.includes(t.textContent.toLowerCase());t.classList.toggle("active-tag",i)})}function Q(){const e=document.querySelector(".filter__box__centerDiv"),t=document.createElement("div");t.classList.add("filter__box__centerDiv__ratingDiv"),e.appendChild(t);const i=document.createElement("h4");i.textContent="By rating",t.appendChild(i),i.classList.add("filter__box__centerDiv__ratingDiv__title");const c=document.createElement("div");c.classList.add("filter__box__centerDiv__ratingDiv__starDiv"),t.appendChild(c);for(let s=1;s<=5;s++){const n=new Image;n.src="assets/svg/star.svg",n.className="filter__box__centerDiv__ratingDiv__star",c.appendChild(n),o.lowestStars.push(n),n.id="lowest_"+s,F(n,"lowestRating",s)}const a=document.createElement("p");a.textContent="to",a.classList.add("filter__box__centerDiv__ratingDiv__starDiv__text"),c.appendChild(a);for(let s=1;s<=5;s++){const n=new Image;n.src="assets/svg/star-filled.svg",n.className="filter__box__centerDiv__ratingDiv__star",c.appendChild(n),o.highestStars.push(n),n.id="highest_"+s,F(n,"highestRating",s)}}function F(e,t,i){e.addEventListener("click",()=>{let c=!1;(t.includes("lowest")?"lowestRating":"highestRating")==="lowestRating"?i>o.highestRating&&(c=!0):i<o.lowestRating&&(c=!0),c||(o[t]=i,k(e),p(g?g.value:""))}),e.addEventListener("mouseover",()=>{k(e,i)}),e.addEventListener("mouseout",()=>{k(e)})}function k(e,t){let i=e.id.includes("lowest")?"lowestRating":"highestRating",c=t||o[i];e.id.includes("lowest")?o.lowestStars.forEach((a,s)=>{s+1<=c?(a.getAttribute("src")==="assets/svg/star.svg"||s+1===Number(e.id[e.id.length-1]))&&(a.src="assets/svg/star-filled.svg"):a.getAttribute("src")==="assets/svg/star-filled.svg"&&(a.src="assets/svg/star.svg")}):o.highestStars.forEach((a,s)=>{s>c-1?a.src="assets/svg/star.svg":a.src="assets/svg/star-filled.svg"})}function X(e){const t=v.indexOf(e);t===-1?v.push(e):v.splice(t,1),V(),p(g?g.value:"")}function j(e){const t=document.querySelector(".filter__box__centerDiv__dynamicDivMain__dynamicDivTagContainer");t.textContent="";const i=z(e);B=[],i.forEach(c=>{const a=c.charAt(0).toUpperCase()+c.slice(1).toLowerCase(),s=document.createElement("button");s.classList.add("filter__box__centerDiv__dynamicDivMain__dynamicTag"),s.textContent=a,s.addEventListener("click",()=>X(c)),v.includes(c)&&s.classList.add("active-tag"),t.appendChild(s),B.push(s)})}function z(e){const t=new Set;return e.forEach(i=>{i.labels.forEach(c=>{t.add(c)})}),Array.from(t).sort((i,c)=>i.localeCompare(c))}function G(e){clearTimeout(R),R=setTimeout(()=>{g=e.target,p(e.target.value)},H)}function p(e,t){const i=C();console.log("All challenges:",i);const c=document.getElementById("DOM__checkBox1")?document.getElementById("DOM__checkBox1").checked:!0,a=document.getElementById("DOM__checkBox2")?document.getElementById("DOM__checkBox2").checked:!0,s=i.filter(n=>{const l=n.rating>=o.lowestRating&&n.rating<=o.highestRating,u=e.length<3||n.title.toLowerCase().includes(e.toLowerCase())||n.description.toLowerCase().includes(e.toLowerCase())||n.labels.some(h=>h.toLowerCase().includes(e.toLowerCase())),m=c&&n.type.toLowerCase()==="online"||a&&n.type.toLowerCase()==="onsite",r=v.every(h=>n.labels.some(d=>d.toLowerCase()===h.toLowerCase()));return u&&m&&r&&l});t&&(w=t),w&&s.sort((n,l)=>{switch(w.target.value){case"name":return n.title.localeCompare(l.title);case"name-reverse":return l.title.localeCompare(n.title);case"rating-lowest":return n.rating-l.rating;case"rating-highest":return l.rating-n.rating}}),O(s)}function O(e){const t=document.querySelector(".challenges__list");if(t.textContent="",e.length===0){t.textContent="No matching challenges";return}T(e,t)}function J(){M.classList.remove("filter__hidden"),K();const e=C();O(e)}function K(){document.querySelector(".filter__box").remove()}function W(e){const i=C().filter(a=>a.type.toLowerCase()===e.toLowerCase()),c=document.querySelector(".challenges__list");T(i,c)}
//# sourceMappingURL=challenges-B1VtRuuc.js.map
